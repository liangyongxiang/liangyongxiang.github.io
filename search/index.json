[{"content":"TINYWM 我现在用的wm是dwm, 它是linux的一个极简的窗口管理器。基于C语言，大概只有2000行的代码。 不过它还不是最简单的窗口管理器。最简单的窗口管理器是tinywm: http://incise.org/tinywm.html。源码如下，我稍微整理一下格式：\n/* TinyWM is written by Nick Welch \u0026lt;mack@incise.org\u0026gt;, 2005. * * This software is in the public domain * and is provided AS IS, with NO WARRANTY. */ #include \u0026lt;X11/Xlib.h\u0026gt; #define MAX(a, b) ((a) \u0026gt; (b) ? (a) : (b))  int main() { Display * dpy; Window root; XWindowAttributes attr; XButtonEvent start; XEvent ev; if(!(dpy = XOpenDisplay(0x0))) return 1; root = DefaultRootWindow(dpy); XGrabKey(dpy, XKeysymToKeycode(dpy, XStringToKeysym(\u0026#34;F1\u0026#34;)), Mod1Mask, root, True, GrabModeAsync, GrabModeAsync); XGrabButton(dpy, 1, Mod1Mask, root, True, ButtonPressMask, GrabModeAsync, GrabModeAsync, None, None); XGrabButton(dpy, 3, Mod1Mask, root, True, ButtonPressMask, GrabModeAsync, GrabModeAsync, None, None); for(;;) { XNextEvent(dpy, \u0026amp;ev); if(ev.type == KeyPress \u0026amp;\u0026amp; ev.xkey.subwindow != None) XRaiseWindow(dpy, ev.xkey.subwindow); else if(ev.type == ButtonPress \u0026amp;\u0026amp; ev.xbutton.subwindow != None) { XGrabPointer(dpy, ev.xbutton.subwindow, True, PointerMotionMask|ButtonReleaseMask, GrabModeAsync, GrabModeAsync, None, None, CurrentTime); XGetWindowAttributes(dpy, ev.xbutton.subwindow, \u0026amp;attr); start = ev.xbutton; } else if(ev.type == MotionNotify) { int xdiff, ydiff; while(XCheckTypedEvent(dpy, MotionNotify, \u0026amp;ev)); xdiff = ev.xbutton.x_root - start.x_root; ydiff = ev.xbutton.y_root - start.y_root; XMoveResizeWindow(dpy, ev.xmotion.window, attr.x + (start.button==1 ? xdiff : 0), attr.y + (start.button==1 ? ydiff : 0), MAX(1, attr.width + (start.button==3 ? xdiff : 0)), MAX(1, attr.height + (start.button==3 ? ydiff : 0))); } else if(ev.type == ButtonRelease) XUngrabPointer(dpy, CurrentTime); } } Display是Xorg的概念，在archlinux wiki上找到一个简短的解释(https://wiki.archlinux.org/index.php/Multihead):\n  Monitor refers to a physical display device, such as an LCD panel. Screen refers to an X-Window screen (that is: a monitor attached to a display). Display refers to a collection of screens that are in use at the same time showing parts of a single desktop (you can drag windows among all screens in a single display).   TODO\n","date":"2021-01-01T01:39:10+08:00","permalink":"https://liangyongxiang.github.io/p/wm%E5%AD%A6%E4%B9%A0/","title":"WM学习"}]